[workspace]
authors = ["s0288 <alex.gansmann@hey.com>"]
channels = ["conda-forge"]
name = "ml_api"
platforms = ["linux-64"]
version = "0.1.0"

[environments]
default = []
dev = ["default", "dev"]

[tasks]
docker-compose = "docker-compose up --build"
docker-create-network = "docker network create loan-net"
docker-run = "docker run --rm --name loan_api --net loan-net -p 8000:8000 loan_api"
docker-build = "docker build -t loan_api ."
fastapi-prod = "uvicorn src.app:app --host 0.0.0.0 --port 8000"

[dependencies]
python = ">=3.14.0,<3.15"
fastapi = ">=0.119.1,<0.120"
uvicorn = ">=0.38.0,<0.39"
joblib = ">=1.5.2,<2"
scikit-learn = ">=1.7.2,<2"
pandas = ">=2.3.3,<3"

[feature.dev.tasks]
fastapi = "uvicorn src.app:app --reload --host 0.0.0.0 --port 8000"
train-model = "python train/model.py"

[feature.dev.dependencies]
jupyterlab = ">=4.4.10,<5"
matplotlib = ">=3.10.7,<4"
seaborn = ">=0.13.2,<0.14"

[pypi-dependencies]
prometheus-client = ">=0.23.1, <0.24"
prometheus-fastapi-instrumentator = ">=7.1.0, <8"
